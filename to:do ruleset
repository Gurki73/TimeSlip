Solver To-Do List (v0 – Working Backbone)
1. Demand Object Builder
1.1 ✔️ Initialize empty demand for all roles  { roleID: { min: 0, max: Infinity } }
1.2 ✔️ Loop through total rules - Shrink demand ranges (min/max intersection)
1.3 ☐ Loop through flexible rules - Compute derived min/max from current attendance - Shrink demand ranges again
1.4 ☐ Result: one final demand object per timeframe

2. Attendance Helpers
2.5 ☐ Function to compute total per role, total = main + secondary + trinary
2.6 ☐ Utility to clone attendance (for simulation) 
2.7 ☐ Utility to apply / revert a reassignment

3. Feasibility Check (Hard Gate)
3.8 ☐ For each role: Check if attendance.total can reach demand.min - Include potential reassignable employees
3.9 ☐ If any role fails → mark timeframe as impossible, stop solver

4. Role Status Classification
4.10 ☐ For each role: deficit = demand.min - total / surplus = total - demand.max
4.11 ☐ Sort roles by: deficit first / larger absolute violation / rule priority (totals > ratios)

5. Reassignment Candidate Finder
5.12 ☐ Given a target role: Find employees in this timeframe / Filter by allowed roles (main → secondary → trinary)
5.13 ☐ Exclude moves that: Break any role below demand.min / Exceed demand.max
5.14 ☐ Rank candidates by: preference level / moving from surplus role /minimal disruption

6. Simulation Loop (Day / Shift)
6.15 ☐ While deficits exist: Pick highest-priority role / Simulate best reassignment
6.16 ☐ After simulation: Recompute attendance / Rebuild flexible demand / Validate all roles against demand ranges
6.17 ☐ Commit move only if valid
6.18 ☐ Stop when no improving move exists

7. Stop Conditions & Safety Nets
7.19 ☐ Max moves per timeframe
7.20 ☐ Max moves per employee
7.21 ☐ Detect no-op loops

8. Timeframe Strategy
8.22 ☐ Shift-level → solve + reassign
8.23 ☐ Day-level → solve + reassign (primary path)
8.24 ☐ Week-level → aggregate + warn only
8.25 ☐ No upward reassignment

9. Diagnostics & Debugging
9.26 ☐ Log demand before/after solving
9.27 ☐ Log every committed reassignment
9.28 ☐ Clear reason when solver stops (solved / stuck / impossible)

10. Beta Scope Guardrails
10.29 ☐ Ignore special rules
10.30 ☐ Fixed role range (0–13)
10.31 ☐ No cross-day employee moves

